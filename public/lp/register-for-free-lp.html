
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="https://flirtybum.com">
    <title>FlirtyBum</title>
    <link rel="stylesheet" href="/register-for-free/css/bootstrap.min.css">
    <link rel="stylesheet" href="/register-for-free/css/style.css">
    <link rel="stylesheet" href="/register-for-free/css/responsive.css">
    <link rel="shortcut icon" href="../media/logos//favicon-fb.png" />
	<style>
		.error_msg {text-align: left;display: inherit; color: #c02b2c;}
	</style>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZEVR7VWFYB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-ZEVR7VWFYB');
    </script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js'
        import { getDatabase, ref, onValue, onDisconnect, set } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

        var firebaseConfig = {
            apiKey: "AIzaSyCgjDxemLiKHj0YJlunzCDvQNT1NKA2hnU",
            authDomain: "chat-hub-1.firebaseapp.com",
            databaseUrl: "https://chat-hub-1-default-rtdb.firebaseio.com/",
            projectId: "chat-hub-1",
            storageBucket: "chat-hub-1.appspot.com",
            messagingSenderId: "435526947076",
            appId: "1:435526947076:web:ae60833102a524c8020051",
        };

        const app = initializeApp(firebaseConfig);

        let userurl = document.location.href;
        let url = new URL(userurl);
        let searchParams = new URLSearchParams(url.search);
        const email = searchParams.get('email');

        const site = window.location.hostname.split(".")[0];

        if (email) {
            let onVisitLanding = {
                is_on_page: true,
                email: email,
                site: site,
            }

            let onLeaveLanding = {
                is_on_page: false,
                email: email,
                site: site,
            }

            const db = getDatabase(app);
            let emailId = email.replaceAll(".", "_");
            const visitRef = ref(db, `landing/${site}/visitors/${emailId}/status`)
            const connectedRef = ref(db, '.info/connected');

            $("#email").val(email);
            onValue(connectedRef, (snapshot) => {
                if (snapshot.val() == false) {
                    return;
                };
                onDisconnect(visitRef).set(onLeaveLanding).then(() => {
                    set(visitRef, onVisitLanding);
                });
            });
        }
    </script>
</head>

<body>

    <main class="idx_register_wrap">

        <section class="main_wrapper">
            <div class="container">
                <div class="logo_wrapper">
                    <h1><img src="../media//logos/flirtybumblack.svg" /></h1>
                    <div class="batch_wrap">
                        <img src="/register-for-free/images/icons/badge.png"/>
                                                                    </div>
                </div>
            </div>
        </section>

        <section class="idx_register_form_wrapper">
            <div class="container">
                <h2 class="title">REGISTER FOR FREE</h2>


                <div class="row">
                    <div class="col-12 col-lg-4 col-md-4 col-sm-12 profiles res_none">
                        <ul>
                            <li>
                                <div class="profile_box">
                                    <div class="image_wrapper">
                                        <img src="/register-for-free/images/imgs/profile-img1.png" />
                                    </div>
                                    <div class="name">
                                        <h5 class="title">MelinaX, 24</h5>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div class="profile_box">
                                    <div class="image_wrapper">
                                        <img src="/register-for-free/images/imgs/profile-img2.png" />
                                    </div>
                                    <div class="name">
                                        <h5 class="title">SingleSissel, 29</h5>
                                    </div>
                                </div>
                            </li>


                            <li>
                                <div class="profile_box">
                                    <div class="image_wrapper">
                                        <img src="/register-for-free/images/imgs/profile-img3.png" />
                                    </div>
                                    <div class="name">
                                        <h5 class="title">Tuva96, 20</h5>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="col-12 col-lg-8 col-md-8 col-sm-12 register_form_wrapper">
                        <div class="profile_box_wrapper responsive_box" style="display: none;">
                            <ul>
                              
 
                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img5.png" />
                                            
                                        </div>
                                        <div class="name">
                                            <h5 class="title">DesperatBente, 32</h5>
                                        </div>
                                    </div>
                                </li>


                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img1.png" />
                                           
                                        </div>
                                        <div class="name">
                                            <h5 class="title">MelinaX, 24</h5>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="form_wrapper">
                            <form>
                                <div class="col">
                                    <select id="gender">
                                        <option value="Male">Seeking a female</option>
                                        <option value="Female">Seeking a male</option>
                                        <!--<option value="">Seeking a couple</option>
                                        <option value="">Seeking a transgender</option>-->
                                    </select>
                                </div>
                                <div class="col">
                                    <input type="text" placeholder="Username" id="username">
									<label class="error_msg error_msg_username"></label>
                                </div>
                                <div class="col">
                                    <input type="password" placeholder="password" id="password">
                                </div>

                                <div class="col">
                                    <input type="text" placeholder="email" id="email">
									<span class="error_msg error_msg_email"></span>
                                </div>
                                <div class="col checkbox">
									<label class="error_msg error_msg_accept_tc">* Please agree our Terms and Conditions.</label>
                                    <input type="checkbox" id="accept_tc" value="1"><span>I accept the <a href="#">Terms & Conditions </a> and <a
                                            href="#">Privacy
                                        policy </a></span>
									
                                </div>
                                <div class="col">
                                    <button type="button" class="get_it_on save_form"> get it on</button>
                                </div>
								<br>
								<div class="alert alert-success success_profile_created" role="alert">
									<b>Congratulations!</b> Your profile created successfully.
								</div>
                            </form>
                        </div>
                        <div class="profile_box_wrapper res_none">
                            <ul>
                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img4.png" />
                                        </div>
                                        <div class="name">
                                            <h5 class="title">SandyRusts, 24</h5>
                                        </div>
                                    </div>
                                </li>

                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img5.png" />
                                            
                                        </div>
                                        <div class="name">
                                            <h5 class="title">DesperatBente, 32</h5>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="profile_box_wrapper responsive_box" style="display: none;">
                            <ul>
                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img6.jpg" />
                                        </div>
                                        <div class="name">
                                            <h5 class="title">DearCher, 28</h5>
                                        </div>
                                    </div>
                                </li>

                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img2.png" />
                                            
                                        </div>
                                        <div class="name">
                                            <h5 class="title">SingleSissel, 29</h5>
                                        </div>
                                    </div>
                                </li>

                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img3.png" />
                                           
                                        </div>
                                        <div class="name">
                                            <h5 class="title">Tuva96, 20</h5>
                                        </div>
                                    </div>
                                </li>


                                <li>
                                    <div class="profile_box">
                                        <div class="image_wrapper">
                                            <img src="/register-for-free/images/imgs/profile-img4.png" />
                                           
                                        </div>
                                        <div class="name">
                                            <h5 class="title">SandyRusts, 24</h5>
                                        </div>
                                    </div>
                                </li>

                               
                            </ul>
                        </div>
                    </div>
                </div>


            </div>
        </section>


        <section class="footer_setion">
            <div class="container">
                <div class="icon_step_wrapper">
                    <div class="row">
                        <div class="col-4">
                            <div class="icon_wrap">
                                <img src="/register-for-free/images/icons/icon1.svg" />
                            </div>
                        </div>

                        <div class="col-4">
                            <div class="icon_wrap">
                                <img src="/register-for-free/images/icons/icon3.svg" />
                            </div>
                        </div>

                        <div class="col-4">
                            <div class="icon_wrap">
                                <img src="/register-for-free/images/icons/icon2.svg" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row"> 
                    <div class="col-lg-4 col-md-4 col-sm-12 col-12 box_wrapper">
                        <div class="step_box_wrapper">
                            <h4 class="title">Create your profile for free</h4>
                            <div class="description">
                                <p>Within minutes you'll be chatting with hot and horny women in your area</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-12 box_wrapper">
                        <div class="step_box_wrapper">
                            <h4 class="title">Search for hot sex in your area</h4>
                            <div class="description">
                                <p>Quickly search & find girls who are online & looking for encounters</p>
                            </div>
                        </div>
                    </div>


                    <div class="col-lg-4 col-md-4 col-sm-12 col-12 box_wrapper">
                        <div class="step_box_wrapper">
                            <h4 class="title">Meet local women now</h4>
                            <div class="description">
                                <p>Screw dating - get hooked up with all the girls you want in your area</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="/register-for-free/js/bootstrap.bundle.min.js"></script>
	<script>
		function IsEmail(email) {
		  var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
		  if(!regex.test(email)) {
			return false;
		  }else{
			return true;
		  }
		}
		
        jQuery(document).ready(function () {

            // var url_email = getParameterByName('email');
            // var clickid = getParameterByName('cid');
            // var page = window.location.href;

            // if(url_email){

            //     $('#email').val(url_email);

            //     jQuery.ajax({
            //         type: "POST",
            //         dataType: "json",
            //         url: "/wp-admin/admin-ajax.php",
            //         data: {
            //             email: url_email,
            //             ip: '<?php echo $ip; ?>',
            //             state: '<?php echo $result->region; ?>',
            //             cid: clickid,
            //             page_url: page,
            //             action: "landing_new_user_add"
            //         },
            //         success: function (response) {
            //             // console.log(JSON.stringify(response));
            //             // if(response == "1"){
            //             //     alert("You are already registered on this site");
            //             //     window.location.reload();
            //             // }
            //         }
            //     });

            // }

            $(".success_profile_created").hide();
			$(".error_msg").hide();
			// $('#username').on('change', function () {
            //     var username = $("#username").val();
            //     if (username == '') {
            //         return false;
            //     }
            //     jQuery.ajax({
            //         type: "POST",
            //         dataType: "json",
            //         url: "/wp-admin/admin-ajax.php",
            //         data: {
            //             username: username,
            //             action: "check_username_exist"
            //         },
            //         success: function (response) {
            //             if (response == 1) {
            //                 $(".error_msg_username").show();
            //                 $(".error_msg_username").text('This username all ready exist!');
            //                 $("#username").val('');
            //             } else {
            //                 $(".error_msg_username").hide();
            //             }
            //         }
            //     });
            // });
			
			// $('#email').on('change', function () {
            //     var email = $("#email").val();
            //     if (email == '') {
            //         return false;
            //     }
            //     jQuery.ajax({
            //         type: "POST",
            //         dataType: "json",
            //         url: "/wp-admin/admin-ajax.php",
            //         data: {
            //             email: email,
            //             action: "check_email_exist"
            //         },
            //         success: function (response) {
            //             if (response == 1) {
            //                 $(".error_msg_email").show();
            //                 $(".error_msg_email").text('This email all ready exist!');
            //                 $("#email").val('');
            //             } else if (response == 2) {
            //                 $(".error_msg_email").show();
            //                 $(".error_msg_email").text(
            //                     '* Please enter valid email address.');
            //                 $("#email").val('');
            //             } else {
            //                 $(".error_msg_email").hide();
            //             }
            //         }
            //     });
            // });
			
			setTimeout(function(){ 
				$("#username").val('');
				$("#password").val('');
				$(".error_msg_username").hide();
			}, 1000);
			
			$(".save_form").click(function () {
                var username = $("#username").val();
                var password = $("#password").val();
                var email = $("#email").val();
				var dob = '';
                var gender = $('#gender').val();
				var accept_tc = $("#accept_tc:checked").val();
                if (username == '') {
                    $("#username").focus();
                    return false;
                }
                if (password == '') {
                    $("#password").focus();
                    return false;
                }
                if (email == '') {
                    $("#email").focus();
                    return false;
                }

                if (username.includes("@")) {
                    $(".error_msg_username").show();
                    $(".error_msg_username").text("Please refrain from using @ character");
                    return false;
                }

                if (IsEmail(email) == false) {
                    $(".error_msg_email").show();
                    $(".error_msg_email").text('* Please enter valid email address');
                    return false;
                }
                $(".error_msg_email").hide();
				if(accept_tc == undefined){
					$(".error_msg_accept_tc").show();
					return false;
				}
				$(".error_msg_accept_tc").hide();
                $(".error_msg_username").hide();
                $(".error_msg_email").hide();

                let url = "https://us-central1-chat-hub-1.cloudfunctions.net/onUserSignUp?token=6d41ca31-971f-46b2-8017-1d72b7699d20";
                let data = {
                    username: username,
                    email: email,
                    password: password,
                    gender: gender,
                    birthday: dob,
                    site: window.location.hostname.split(".")[0]
                }

                // console.log(`Data: ${data}`);
                // console.log(`Username: ${username} | Email: ${email} | Password: ${password}`)
                // console.log(`Url: ${url}`);
                // console.log(`Stringify: ${JSON.stringify(data)}`);
                fetch(url, {
                    method: 'POST', // *GET, POST, PUT, DELETE, etc.
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Origin': '*'
                    },
                    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
                    body: JSON.stringify(data) // body data type must match "Content-Type" header
                }).then(response => response.json())
                    .then((object) => {
                        if (object.success) {
                            $(".success_profile_created").show();
                            gtag("event", "sign_up", {
                                "user_type": "named",
                            });
                            setTimeout(() => {
                                window.location.replace(object.data.continueUrl);
                            }, 1000);
                        } else {
                            //console.log(`Failed: ${object.message}`)
                            if (object.message.includes("Username")) {
                                $(".error_msg_username").show();
                                $(".error_msg_username").text(object.message);
                            } else if (object.message.includes("Email")) {
                                $(".error_msg_email").show();
                                $(".error_msg_email").text(object.message);
                            }
                        }
                    }).catch((reason) => {
                        console.log(`Failed: ${reason.message}`);
                    })
                // jQuery.ajax({
                //     type: "POST",
                //     dataType: "json",
                //     url: "/wp-admin/admin-ajax.php",
                //     data: {
                //         username: username,
                //         password: password,
                //         gender: gender,
                //         dob: dob,
                //         email: email,
                //         accept_tc: '1',
                //         action: "new_user_create"
                //     },
                //     success: function (response) {
                //         if (response > 0) {
                //             $(".success_profile_created").show();
                //             var click_id = getParameterByName('cid');
            
                //             if(click_id){

                //                 $.ajax({
                //                     url:"https://funtimeflirt.com/wp-content/themes/WPDATING-child/test_postback.php?clickid="+click_id+"",
                //                     success:function(json){
                //                       get_url_after_login(username);
                //                     },
                //                     error:function(){
                //                        // alert("Error");
                //                     }      
                //                 });
                //             }else{
				// 				setTimeout(function(){ 
                //                     get_url_after_login(username);
				// 				}, 1000);
                //             }
                //         	//
                //         } else {
                //             alert("Something went wrong. Please try again.");
                //             window.location.reload();
                //         }
                //     }
                // });
            });
		});

        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        function get_url_after_login(username){

            let data = {
                username: username,
                action: "login_after_registration"
            };
            jQuery.post('https://funtimeflirt.com/wp-admin/admin-ajax.php', data, function (response) {
                if(response != ""){
                    //alert(response);
                    window.location.href= response;
                }
                
            });
        
        }
	</script>
</body>
</html>

